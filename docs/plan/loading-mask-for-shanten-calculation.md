# 清一色モード時のシャンテン数計算ローディングマスク表示

## 作業計画

1. **現状調査**
   - 清一色モードでのシャンテン数計算処理の確認
   - プレイヤーエリアのコンポーネント構造の確認
   - 既存のローディング表示の実装確認

2. **設計**
   - ローディングマスクコンポーネントの設計
   - 0.5秒遅延機能の実装方法検討
   - プレイヤーエリアへのローディングマスク統合方法

3. **実装**
   - ローディングマスクコンポーネントの作成
   - シャンテン数計算開始・終了の検知
   - 0.5秒タイマー機能の実装
   - プレイヤーエリアへの統合

4. **テスト**
   - 清一色モードでの動作確認
   - 0.5秒以内の計算でマスクが表示されないことの確認
   - 0.5秒以上の計算でマスクが表示されることの確認

## 設計思想

### 1. ユーザー体験の最適化
- 短時間の計算では不要なローディング表示を避ける
- 長時間の計算では適切なフィードバックを提供
- プレイヤーエリア全体をマスクし、計算中であることを明確に示す

### 2. パフォーマンスへの配慮
- タイマー管理を適切に行い、メモリリークを防ぐ
- 不要なレンダリングを避ける
- 既存の計算キャンセル機能との連携

### 3. 再利用性
- ローディングマスクを独立したコンポーネントとして実装
- 他の重い処理でも利用可能な設計
- プロップスで表示制御を柔軟に行える

## 作業対象ファイル

### ファイル名: src/components/LoadingMask.vue
### 改修内容:
- 新規作成：0.5秒遅延機能付きローディングマスクコンポーネント
- フェードトランジション機能
- カスタマイズ可能なテキストと遅延時間
- 適切なタイマー管理でメモリリークを防止

### ファイル名: src/components/PlayerArea.vue
### 改修内容:
- ローディングマスクコンポーネントの統合（3-9行）
- プロップス追加：`isCalculatingAcceptance`と`isChinitsuyoMode`（164-165行）
- CSS修正：相対位置設定でローディングマスクを正しく表示（366行）
- 人間プレイヤー（bottom）かつ清一色モードでのみローディングマスクを表示

### ファイル名: src/utils/game-manager.ts
### 改修内容:
- 清一色モード状態取得用getterを追加（1674-1677行）
- `isChinitsuyoMode`プロパティで清一色モード状態を公開

### ファイル名: src/views/FourPlayerGameView/index.vue
### 改修内容:
- PlayerAreaコンポーネントにローディングマスク関連プロップスを追加（90行）
- 既存の`isCalculatingAcceptance`状態と新しい`isChinitsuyoMode`を連携